# Configurar MongoDB

## Preparación

Nuestra API usará MongoDB como almacén de datos. Para levantar un servidor MongoDB usaremos Docker una herramienta que realiza un tipo de virutalización a nivel de sistema operativo llamada *containerización*.

Antes de levantar nuestra instancia local de MongoDB debemos instalar Docker y Docker Compose:

* Instalar Docker:
    * [Ubuntu](https://ubunlog.com/como-instalar-docker-en-ubuntu-18-04-y-derivados/)
    * [Mac OSX](https://docs.docker.com/docker-for-mac/install/#install-and-run-docker-for-mac)
* Instalar Docker Compose:
    * [Ubuntu](https://dockertips.com/utilizando-docker-compose)
    * En Mac OSX Docker y Docker Compose vienen juntos en el mismo paquete de Docker for Mac

## Instalar MongoDB sobre Docker

Usaremos la imagen de MongoDB que está en DockerHub, el repositorio estándar de imágenes Docker. Definimos nuestra instancia MongoDB con Docker Compose, creando en nuestro directorio raíz un archivo llamado `docker-compose.yml` que incluirá las siguientes configuraciones.

```bash
touch docker-compose.yml
```

```yml
version: "2"
services:
  mongo:
    container_name: mongo
    image: mongo
    volumes:
      - ./data:/data/db
    ports:
      - "27017:27017"
```

El archivo `docker-compose.yml` que creamos le indica a Docker Compose como construir y levantar los containers que nuestra aplicación necesita. En este caso declaramos un servicio que llamamos `mongo`, con un nombre de container que también es `mongo`, que usa la imagen `mongo` estándar de DockerHub y que mapea el del host ubicado en `./data` con el volumen del *container* ubicado en `./data/db`. 

Los volúmenes son el mecanismo que usa Docker para persistir datos entre cada reinicio de los *containers*, mapeando directorios internos del *container* con directorios que existen en el *host* que lo aloja

Para asegurarnos de que el directorio exista en el *host* vamos a crearlo y a agregarle un archivo .gitkeep para mantenerlo dentro de nuestro sistema de control de versiones.

```bash
mkdir data
touch data/.gitkeep
```

Despues de crear el archivo `docker-compose.yml` levantamos la instancia con el comando:

```bash
docker-compose up
```

La primera vez que se ejecuta el proceso demorará, Docker debe descargar la imagen y construir el container de acuerdo a lo que especificamos pero las ejecuciones futuras será mucho más rápidas.

# Conectar nuestra aplicación a MongoDB

## Instalar Mongoose en la app

## Configurar conexión a MongoDB desde la app